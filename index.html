<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>BorderBound Level Editor</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="drawable/icon_web.svg">

    <link rel="stylesheet" href="res/bootstrap-4.3.1.min.css">
    <!-- jQuery 3.1.1 -->
    <script src="res/jquery-3.1.1.min.js"></script>
    <!-- Popper.js (required for Bootstrap JS) -->
    <script src="res/popper.min.js"></script>
    <!-- Bootstrap JS (requires Popper) -->
    <script src="res/bootstrap-4.3.1.min.js"></script>

    <style>
        body {
            user-select: none;
        }

        .field {
            position: relative;
            width: 70px;
            height: 70px;
            cursor: pointer;
        }

        .field img {
            position: absolute;
            top: 0;
            left: 0;
            width: 70px;
            height: 70px;
        }

        table {
            border-collapse: collapse;
        }

        td {
            padding: 2px;
        }

        .toolbox-item {
            display: none;
        }

        .toolbox-item.toolbox-item-empty {
            display: block;
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <div class="navbar navbar-light bg-light d-flex justify-content-between align-items-center">
        <!-- Left side -->
        <div class="d-flex align-items-center">
            <h1 class="navbar-brand mb-0">
                <img src="drawable/icon_web.svg" width="30" height="30">
                BorderBound! Level Editor
            </h1>
        </div>

        <!-- Right side -->
        <div>
            <button class="btn btn-sm btn-success mr-1" onclick="submitLevel()">Submit</button>
            <button class="btn btn-sm btn-danger" onclick="clearLevel()">Clear</button>
        </div>
    </div>

    <!-- LANDING PAGE -->
    <div id="landingPage" class="container text-center p-5" style="display:none;">
        <h1 class="mb-4">
            BorderBound Level Editor
        </h1>

        <p class="lead mb-4">
            Create and share custom levels for BorderBound!
        </p>

        <div class="d-flex flex-column align-items-center">
            <button class="btn btn-dark btn-lg mb-3" onclick="startNewLevel(6,5)">
                Create New Small Level
            </button>

            <button class="btn btn-warning btn-lg mb-3" onclick="startNewLevel(7,6)">
                Create New Medium Level
            </button>

            <button class="btn btn-info btn-lg mb-3" onclick="startNewLevel(8,6)">
                Create New Large Level
            </button>
        </div>
    </div>



    <!-- EDITOR APP -->
    <div id="editorApp" style="display:none;">

        <!-- MAIN -->
        <div class="container p-3">
            <div class="row">
                <!-- BOARD -->
                <div class="col card p-2 m-2">
                    <div class="card-header" id="boardHeader">Game board</div>
                    <div class="card-body" id="boardContainer"></div>
                </div>

                <!-- TOOLBOX -->
                <div class="col card p-2 m-2 toolbox">
                    <div class="card-header">Edit selected position</div>
                    <div class="card-body">

                        <h6>Select type</h6>
                        <table class="m-2">
                            <tr>
                                <!-- EMPTY -->
                                <td>
                                    <div class="field" onclick="setType(TYPE_EMPTY); showToolbox('empty')">
                                        <img src="./drawable/level_box_hole.png">
                                    </div>
                                </td>

                                <!-- FLOW -->
                                <td>
                                    <div class="field" onclick="setType(TYPE_FLOW); showToolbox('flow')">
                                        <img src="./drawable/level_box_color_none.png">
                                        <img src="./drawable/level_box_type_flow.png">
                                    </div>
                                </td>

                                <!-- BOMB -->
                                <td>
                                    <div class="field" onclick="setType(TYPE_BOMB); showToolbox('bomb')">
                                        <img src="./drawable/level_box_color_none.png">
                                        <img src="./drawable/level_box_type_bomb.png">
                                    </div>
                                </td>

                                <!-- LIMIT -->
                                <td>
                                    <div class="field" onclick="setType(TYPE_LIMIT); showToolbox('limit')">
                                        <img src="./drawable/level_box_color_none.png">
                                        <img src="./drawable/level_box_type_limit_up.png">
                                    </div>
                                </td>

                                <!-- NOTHING -->
                                <td>
                                    <div class="field" onclick="setType(TYPE_DISABLED); showToolbox('disabled')">
                                        <img src="./drawable/level_nothing.png">
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <!-- EMPTY TOOLBOX -->
                        <div class="toolbox-item toolbox-item-empty">
                            <h6>Select target color</h6>
                            <table class="m-2">
                                <tr>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_RED)"><img
                                                src="./drawable/level_box_dest_color_red.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_GREEN)"><img
                                                src="./drawable/level_box_dest_color_green.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLUE)"><img
                                                src="./drawable/level_box_dest_color_blue.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_YELLOW)"><img
                                                src="./drawable/level_box_dest_color_yellow.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLACK)"><img
                                                src="./drawable/level_box_dest_color_black.png"></div>
                                    </td>
                                </tr>
                            </table>

                            <h6>Select prefilled color</h6>
                            <table class="m-2">
                                <tr>
                                    <td>
                                        <div class="field" onclick="setPreset(-1)"><img
                                                src="./drawable/level_box_hole.png">
                                        </div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setPreset(COLOR_RED)"><img
                                                src="./drawable/level_box_hole.png"><img
                                                src="./drawable/level_box_stone_red.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setPreset(COLOR_GREEN)"><img
                                                src="./drawable/level_box_hole.png"><img
                                                src="./drawable/level_box_stone_green.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setPreset(COLOR_BLUE)"><img
                                                src="./drawable/level_box_hole.png"><img
                                                src="./drawable/level_box_stone_blue.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setPreset(COLOR_YELLOW)"><img
                                                src="./drawable/level_box_hole.png"><img
                                                src="./drawable/level_box_stone_yellow.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setPreset(COLOR_BLACK)"><img
                                                src="./drawable/level_box_hole.png"><img
                                                src="./drawable/level_box_stone_black.png"></div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <!-- FLOW TOOLBOX -->
                        <div class="toolbox-item toolbox-item-flow">
                            <h6>Select color</h6>
                            <table class="m-2">
                                <tr>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_RED)"><img
                                                src="./drawable/level_box_color_red.png"><img
                                                src="./drawable/level_box_type_flow.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_GREEN)"><img
                                                src="./drawable/level_box_color_green.png"><img
                                                src="./drawable/level_box_type_flow.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLUE)"><img
                                                src="./drawable/level_box_color_blue.png"><img
                                                src="./drawable/level_box_type_flow.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_YELLOW)"><img
                                                src="./drawable/level_box_color_yellow.png"><img
                                                src="./drawable/level_box_type_flow.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLACK)"><img
                                                src="./drawable/level_box_color_black.png"><img
                                                src="./drawable/level_box_type_flow.png"></div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <!-- BOMB TOOLBOX -->
                        <div class="toolbox-item toolbox-item-bomb">
                            <h6>Select color</h6>
                            <table class="m-2">
                                <tr>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_RED)"><img
                                                src="./drawable/level_box_color_red.png"><img
                                                src="./drawable/level_box_type_bomb.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_GREEN)"><img
                                                src="./drawable/level_box_color_green.png"><img
                                                src="./drawable/level_box_type_bomb.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLUE)"><img
                                                src="./drawable/level_box_color_blue.png"><img
                                                src="./drawable/level_box_type_bomb.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_YELLOW)"><img
                                                src="./drawable/level_box_color_yellow.png"><img
                                                src="./drawable/level_box_type_bomb.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLACK)"><img
                                                src="./drawable/level_box_color_black.png"><img
                                                src="./drawable/level_box_type_bomb.png"></div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <!-- LIMIT TOOLBOX -->
                        <div class="toolbox-item toolbox-item-limit">
                            <h6>Select color</h6>
                            <table class="m-2">
                                <tr>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_RED)"><img
                                                src="./drawable/level_box_color_red.png"><img
                                                src="./drawable/level_box_type_limit_up.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_GREEN)"><img
                                                src="./drawable/level_box_color_green.png"><img
                                                src="./drawable/level_box_type_limit_up.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLUE)"><img
                                                src="./drawable/level_box_color_blue.png"><img
                                                src="./drawable/level_box_type_limit_up.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_YELLOW)"><img
                                                src="./drawable/level_box_color_yellow.png"><img
                                                src="./drawable/level_box_type_limit_up.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setColor(COLOR_BLACK)"><img
                                                src="./drawable/level_box_color_black.png"><img
                                                src="./drawable/level_box_type_limit_up.png"></div>
                                    </td>
                                </tr>
                            </table>
                            <h6>Select direction</h6>
                            <table class="m-2">
                                <tr>
                                    <td>
                                        <div class="field" onclick="setDirection('up')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_up.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setDirection('down')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_down.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setDirection('left')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_left.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setDirection('right')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_right.png"></div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="field" onclick="setDirection('rotate_up')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_rotate_up.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setDirection('rotate_down')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_rotate_down.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setDirection('rotate_left')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_rotate_left.png"></div>
                                    </td>
                                    <td>
                                        <div class="field" onclick="setDirection('rotate_right')"><img
                                                src="./drawable/level_box_color_none.png"><img
                                                src="./drawable/level_box_type_limit_rotate_right.png"></div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                    </div>
                </div>

            </div>

            <!-- Modal HTML (place at the end of <body>) -->
            <div class="modal fade" id="submitLevelModal" tabindex="-1" role="dialog"
                aria-labelledby="submitLevelModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document"> <!-- centered -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="submitLevelModalLabel">Submit Your Level</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="submitName">Your name (required)</label>
                                <input type="text" class="form-control" id="submitName">
                            </div>

                            <div class="form-group">
                                <label for="submitEmail">Your email (optional)</label>
                                <input type="email" class="form-control" id="submitEmail">
                            </div>

                            <p>Your level XML:</p>
                            <pre id="xmlOutput" style="background:#f7f7f7; padding:10px;"></pre>

                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="agreeCheck">
                                <label class="form-check-label" for="agreeCheck">
                                    I agree that my level will be included in BorderBound under GPL-3 license.
                                    (required)
                                </label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" id="submitFinalBtn">Submit</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="res/script.js"></script>
</body>

</html>